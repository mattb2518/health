<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 10px;
            text-align: center;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: #007bff;
            color: white;
        }

        .nav-tab:hover:not(.active) {
            background: #e9ecef;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #495057;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #495057;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .slider {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #007bff;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #007bff;
            cursor: pointer;
            border: none;
        }

        .slider-value {
            min-width: 80px;
            text-align: center;
            font-weight: 600;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 14px;
        }

        .value-1 { background: #d4edda; color: #155724; }
        .value-2 { background: #fff3cd; color: #856404; }
        .value-3 { background: #f8d7da; color: #721c24; }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #007bff;
        }

        .textarea {
            min-height: 80px;
            resize: vertical;
        }

        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #0056b3;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .score-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .score-card {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .score-card h4 {
            margin-bottom: 5px;
            font-size: 14px;
            opacity: 0.8;
        }

        .score-card .score {
            font-size: 24px;
            font-weight: bold;
        }

        .meal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .habit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #d4edda;
            color: #155724;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .nav-tab {
                padding: 12px 5px;
                font-size: 12px;
            }
            
            .section {
                padding: 15px;
            }
            
            .meal-grid,
            .habit-grid,
            .exercise-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Health Tracker</h1>
            <p id="currentDate"></p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('daily')">Daily Input</button>
            <button class="nav-tab" onclick="showTab('progress')">Weekly Progress</button>
            <button class="nav-tab" onclick="showTab('history')">History</button>
        </div>

        <!-- Daily Input Tab -->
        <div id="daily" class="tab-content active">
            <div class="section">
                <div class="score-summary">
                    <div class="score-card value-1">
                        <h4>Food Intake</h4>
                        <div class="score" id="intakeScore">-</div>
                    </div>
                    <div class="score-card value-1">
                        <h4>Food Quality</h4>
                        <div class="score" id="qualityScore">-</div>
                    </div>
                    <div class="score-card value-1">
                        <h4>Habits</h4>
                        <div class="score" id="habitsScore">-</div>
                    </div>
                    <div class="score-card value-1">
                        <h4>Exercise</h4>
                        <div class="score" id="exerciseScore">-</div>
                    </div>
                    <div class="score-card value-1">
                        <h4>Daily Total</h4>
                        <div class="score" id="totalScore">-</div>
                    </div>
                </div>
            </div>

            <!-- Food Intake Section -->
            <div class="section">
                <h3 class="section-title">Food Intake</h3>
                <div class="meal-grid">
                    <div class="form-group">
                        <label class="form-label">Breakfast</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="intakeBreakfast" onchange="updateScore()">
                            <div class="slider-value value-2" id="intakeBreakfastValue">Normal</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Lunch</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="intakeLunch" onchange="updateScore()">
                            <div class="slider-value value-2" id="intakeLunchValue">Normal</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Snack</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="intakeSnack" onchange="updateScore()">
                            <div class="slider-value value-2" id="intakeSnackValue">Normal</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Dinner</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="intakeDinner" onchange="updateScore()">
                            <div class="slider-value value-2" id="intakeDinnerValue">Normal</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Food Quality Section -->
            <div class="section">
                <h3 class="section-title">Food Quality</h3>
                <div class="meal-grid">
                    <div class="form-group">
                        <label class="form-label">Breakfast</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="qualityBreakfast" onchange="updateScore()">
                            <div class="slider-value value-2" id="qualityBreakfastValue">Medium</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Lunch</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="qualityLunch" onchange="updateScore()">
                            <div class="slider-value value-2" id="qualityLunchValue">Medium</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Snack</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="qualitySnack" onchange="updateScore()">
                            <div class="slider-value value-2" id="qualitySnackValue">Medium</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Dinner</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="qualityDinner" onchange="updateScore()">
                            <div class="slider-value value-2" id="qualityDinnerValue">Medium</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Habits Section -->
            <div class="section">
                <h3 class="section-title">Habits</h3>
                <div class="habit-grid">
                    <div class="form-group">
                        <label class="form-label">≤2 Drinks</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="1" class="slider" id="habitDrinks" onchange="updateScore()">
                            <div class="slider-value value-1" id="habitDrinksValue">Good</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">No Scavenging</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="1" class="slider" id="habitScavenge" onchange="updateScore()">
                            <div class="slider-value value-1" id="habitScavengeValue">Good</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Sleep Quality</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="1" class="slider" id="habitSleep" onchange="updateScore()">
                            <div class="slider-value value-1" id="habitSleepValue">Good</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exercise Section -->
            <div class="section">
                <h3 class="section-title">Exercise</h3>
                <div class="exercise-grid">
                    <div class="form-group">
                        <label class="form-label">Zone2</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="2" class="slider" id="exerciseZone2" onchange="updateScore()">
                            <div class="slider-value value-2" id="exerciseZone2Value">No</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">VO2Max</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="2" class="slider" id="exerciseVO2" onchange="updateScore()">
                            <div class="slider-value value-2" id="exerciseVO2Value">No</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Strength</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="2" class="slider" id="exerciseStrength" onchange="updateScore()">
                            <div class="slider-value value-2" id="exerciseStrengthValue">No</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Stability/Core</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="2" class="slider" id="exerciseStability" onchange="updateScore()">
                            <div class="slider-value value-2" id="exerciseStabilityValue">No</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Grip</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="2" value="2" class="slider" id="exerciseGrip" onchange="updateScore()">
                            <div class="slider-value value-2" id="exerciseGripValue">No</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weight Section -->
            <div class="section">
                <h3 class="section-title">Weight</h3>
                <div class="form-group">
                    <label class="form-label">Today's Weight (lbs)</label>
                    <input type="number" step="0.1" placeholder="Enter weight" class="input-field" id="weight">
                </div>
            </div>

            <!-- Logging Section -->
            <div class="section">
                <h3 class="section-title">Exercise Log</h3>
                <div class="form-group">
                    <label class="form-label">Exercise Notes</label>
                    <textarea placeholder="Describe your exercise activities..." class="input-field textarea" id="exerciseLog"></textarea>
                </div>
            </div>

            <div class="section">
                <h3 class="section-title">Meal Log</h3>
                <div class="form-group">
                    <label class="form-label">Breakfast</label>
                    <textarea placeholder="What did you eat for breakfast?" class="input-field textarea" id="mealBreakfast"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Lunch</label>
                    <textarea placeholder="What did you eat for lunch?" class="input-field textarea" id="mealLunch"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Snack</label>
                    <textarea placeholder="What did you eat for snacks?" class="input-field textarea" id="mealSnack"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Dinner</label>
                    <textarea placeholder="What did you eat for dinner?" class="input-field textarea" id="mealDinner"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Drinks</label>
                    <textarea placeholder="What did you drink today?" class="input-field textarea" id="mealDrinks"></textarea>
                </div>
            </div>

            <div class="section">
                <button class="btn" onclick="saveData()">Save Today's Data</button>
                <button class="btn btn-secondary" onclick="exportData()">Export Data</button>
            </div>
        </div>

        <!-- Weekly Progress Tab -->
        <div id="progress" class="tab-content">
            <div class="section">
                <h3 class="section-title">Weekly Progress</h3>
                <p>Weekly progress tracking will be displayed here. This feature will show your average scores for each category over the current week compared to your goals.</p>
            </div>
        </div>

        <!-- History Tab -->
        <div id="history" class="tab-content">
            <div class="section">
                <h3 class="section-title">Historical Trends</h3>
                <p>Historical comparison data will be displayed here. This will show week-over-week trends for all your categories.</p>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        Data saved successfully!
    </div>

    <script>
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            loadTodayData();
            updateScore();
            initializeSliderLabels();
            requestNotificationPermission();
            setDailyReminder();
        });

        function updateCurrentDate() {
            const today = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = today.toLocaleDateString('en-US', options);
        }

        function initializeSliderLabels() {
            // Food intake labels
            const intakeLabels = ['Small', 'Normal', 'Large'];
            const qualityLabels = ['Healthy', 'Medium', 'Unhealthy'];
            const binaryLabels = ['Good', 'Bad'];
            const exerciseLabels = ['Yes', 'No'];

            // Update all slider labels
            updateSliderLabel('intakeBreakfast', intakeLabels);
            updateSliderLabel('intakeLunch', intakeLabels);
            updateSliderLabel('intakeSnack', intakeLabels);
            updateSliderLabel('intakeDinner', intakeLabels);
            
            updateSliderLabel('qualityBreakfast', qualityLabels);
            updateSliderLabel('qualityLunch', qualityLabels);
            updateSliderLabel('qualitySnack', qualityLabels);
            updateSliderLabel('qualityDinner', qualityLabels);
            
            updateSliderLabel('habitDrinks', binaryLabels);
            updateSliderLabel('habitScavenge', binaryLabels);
            updateSliderLabel('habitSleep', binaryLabels);
            
            updateSliderLabel('exerciseZone2', exerciseLabels);
            updateSliderLabel('exerciseVO2', exerciseLabels);
            updateSliderLabel('exerciseStrength', exerciseLabels);
            updateSliderLabel('exerciseStability', exerciseLabels);
            updateSliderLabel('exerciseGrip', exerciseLabels);
        }

        function updateSliderLabel(sliderId, labels) {
            const slider = document.getElementById(sliderId);
            const valueDiv = document.getElementById(sliderId + 'Value');
            
            slider.addEventListener('input', function() {
                const value = parseInt(this.value);
                const label = labels[value - 1];
                valueDiv.textContent = label;
                valueDiv.className = `slider-value value-${value}`;
                
                // Mark the appropriate category as touched
                if (sliderId.includes('intake')) {
                    touchedSliders.intake = true;
                } else if (sliderId.includes('quality')) {
                    touchedSliders.quality = true;
                } else if (sliderId.includes('habit')) {
                    touchedSliders.habits = true;
                } else if (sliderId.includes('exercise')) {
                    touchedSliders.exercise = true;
                }
                
                updateScore();
            });
        }

        // Track which sliders have been touched
        let touchedSliders = {
            intake: false,
            quality: false,
            habits: false,
            exercise: false
        };

        function updateScore() {
            // Calculate Food Intake Score (average of 4 meals)
            const intakeScores = [
                parseInt(document.getElementById('intakeBreakfast').value),
                parseInt(document.getElementById('intakeLunch').value),
                parseInt(document.getElementById('intakeSnack').value),
                parseInt(document.getElementById('intakeDinner').value)
            ];
            const intakeAvg = touchedSliders.intake ? (intakeScores.reduce((a, b) => a + b) / 4).toFixed(1) : 0;

            // Calculate Food Quality Score (average of 4 meals)
            const qualityScores = [
                parseInt(document.getElementById('qualityBreakfast').value),
                parseInt(document.getElementById('qualityLunch').value),
                parseInt(document.getElementById('qualitySnack').value),
                parseInt(document.getElementById('qualityDinner').value)
            ];
            const qualityAvg = touchedSliders.quality ? (qualityScores.reduce((a, b) => a + b) / 4).toFixed(1) : 0;

            // Calculate Habits Score (average of 3 habits)
            const habitsScores = [
                parseInt(document.getElementById('habitDrinks').value),
                parseInt(document.getElementById('habitScavenge').value),
                parseInt(document.getElementById('habitSleep').value)
            ];
            const habitsAvg = touchedSliders.habits ? (habitsScores.reduce((a, b) => a + b) / 3).toFixed(1) : 0;

            // Calculate Exercise Score (average of 5 exercises)
            const exerciseScores = [
                parseInt(document.getElementById('exerciseZone2').value),
                parseInt(document.getElementById('exerciseVO2').value),
                parseInt(document.getElementById('exerciseStrength').value),
                parseInt(document.getElementById('exerciseStability').value),
                parseInt(document.getElementById('exerciseGrip').value)
            ];
            const exerciseAvg = touchedSliders.exercise ? (exerciseScores.reduce((a, b) => a + b) / 5).toFixed(1) : 0;

            // Calculate total average
            const activeSections = [intakeAvg, qualityAvg, habitsAvg, exerciseAvg].filter(score => score > 0);
            const totalAvg = activeSections.length > 0 ? (activeSections.reduce((a, b) => parseFloat(a) + parseFloat(b)) / activeSections.length).toFixed(1) : 0;

            // Update display
            updateScoreDisplay('intakeScore', intakeAvg);
            updateScoreDisplay('qualityScore', qualityAvg);
            updateScoreDisplay('habitsScore', habitsAvg);
            updateScoreDisplay('exerciseScore', exerciseAvg);
            updateScoreDisplay('totalScore', totalAvg);
        }

        function updateScoreDisplay(elementId, score) {
            const element = document.getElementById(elementId);
            element.textContent = score == 0 ? '-' : score;
            
            const scoreCard = element.parentElement;
            scoreCard.className = 'score-card';
            
            if (score == 0) {
                scoreCard.classList.add('value-1'); // Default neutral color
            } else if (score <= 1.3) {
                scoreCard.classList.add('value-1');
            } else if (score <= 1.7) {
                scoreCard.classList.add('value-2');
            } else {
                scoreCard.classList.add('value-3');
            }
        }

        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all nav tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function saveData() {
            const today = new Date().toISOString().split('T')[0];
            
            const data = {
                date: today,
                foodIntake: {
                    breakfast: parseInt(document.getElementById('intakeBreakfast').value),
                    lunch: parseInt(document.getElementById('intakeLunch').value),
                    snack: parseInt(document.getElementById('intakeSnack').value),
                    dinner: parseInt(document.getElementById('intakeDinner').value)
                },
                foodQuality: {
                    breakfast: parseInt(document.getElementById('qualityBreakfast').value),
                    lunch: parseInt(document.getElementById('qualityLunch').value),
                    snack: parseInt(document.getElementById('qualitySnack').value),
                    dinner: parseInt(document.getElementById('qualityDinner').value)
                },
                habits: {
                    drinks: parseInt(document.getElementById('habitDrinks').value),
                    scavenging: parseInt(document.getElementById('habitScavenge').value),
                    sleep: parseInt(document.getElementById('habitSleep').value)
                },
                exercise: {
                    zone2: parseInt(document.getElementById('exerciseZone2').value),
                    vo2max: parseInt(document.getElementById('exerciseVO2').value),
                    strength: parseInt(document.getElementById('exerciseStrength').value),
                    stability: parseInt(document.getElementById('exerciseStability').value),
                    grip: parseInt(document.getElementById('exerciseGrip').value)
                },
                weight: document.getElementById('weight').value,
                logs: {
                    exercise: document.getElementById('exerciseLog').value,
                    meals: {
                        breakfast: document.getElementById('mealBreakfast').value,
                        lunch: document.getElementById('mealLunch').value,
                        snack: document.getElementById('mealSnack').value,
                        dinner: document.getElementById('mealDinner').value,
                        drinks: document.getElementById('mealDrinks').value
                    }
                },
                scores: {
                    intake: document.getElementById('intakeScore').textContent,
                    quality: document.getElementById('qualityScore').textContent,
                    habits: document.getElementById('habitsScore').textContent,
                    exercise: document.getElementById('exerciseScore').textContent,
                    total: document.getElementById('totalScore').textContent
                }
            };

            // Save to browser storage
            let allData = JSON.parse(localStorage.getItem('healthTrackerData') || '{}');
            allData[today] = data;
            localStorage.setItem('healthTrackerData', JSON.stringify(allData));

            showNotification('Data saved successfully!');
        }

        function loadTodayData() {
            const today = new Date().toISOString().split('T')[0];
            const allData = JSON.parse(localStorage.getItem('healthTrackerData') || '{}');
            const todayData = allData[today];

            if (todayData) {
                // Mark all categories as touched since we're loading data
                touchedSliders.intake = true;
                touchedSliders.quality = true;
                touchedSliders.habits = true;
                touchedSliders.exercise = true;

                // Load food intake
                document.getElementById('intakeBreakfast').value = todayData.foodIntake.breakfast;
                document.getElementById('intakeLunch').value = todayData.foodIntake.lunch;
                document.getElementById('intakeSnack').value = todayData.foodIntake.snack;
                document.getElementById('intakeDinner').value = todayData.foodIntake.dinner;

                // Load food quality
                document.getElementById('qualityBreakfast').value = todayData.foodQuality.breakfast;
                document.getElementById('qualityLunch').value = todayData.foodQuality.lunch;
                document.getElementById('qualitySnack').value = todayData.foodQuality.snack;
                document.getElementById('qualityDinner').value = todayData.foodQuality.dinner;

                // Load habits
                document.getElementById('habitDrinks').value = todayData.habits.drinks;
                document.getElementById('habitScavenge').value = todayData.habits.scavenging;
                document.getElementById('habitSleep').value = todayData.habits.sleep;

                // Load exercise
                document.getElementById('exerciseZone2').value = todayData.exercise.zone2;
                document.getElementById('exerciseVO2').value = todayData.exercise.vo2max;
                document.getElementById('exerciseStrength').value = todayData.exercise.strength;
                document.getElementById('exerciseStability').value = todayData.exercise.stability;
                document.getElementById('exerciseGrip').value = todayData.exercise.grip;

                // Load weight and logs
                document.getElementById('weight').value = todayData.weight || '';
                document.getElementById('exerciseLog').value = todayData.logs.exercise || '';
                document.getElementById('mealBreakfast').value = todayData.logs.meals.breakfast || '';
                document.getElementById('mealLunch').value = todayData.logs.meals.lunch || '';
                document.getElementById('mealSnack').value = todayData.logs.meals.snack || '';
                document.getElementById('mealDinner').value = todayData.logs.meals.dinner || '';
                document.getElementById('mealDrinks').value = todayData.logs.meals.drinks || '';

                // Trigger slider updates to show correct labels
                initializeSliderLabels();
                updateScore();
            }
        }

        function exportData() {
            const allData = JSON.parse(localStorage.getItem('healthTrackerData') || '{}');
            
            if (Object.keys(allData).length === 0) {
                showNotification('No data to export!');
                return;
            }

            // Create CSV content
            let csvContent = 'Date,Intake Score,Quality Score,Habits Score,Exercise Score,Total Score,Weight,';
            csvContent += 'Breakfast Intake,Lunch Intake,Snack Intake,Dinner Intake,';
            csvContent += 'Breakfast Quality,Lunch Quality,Snack Quality,Dinner Quality,';
            csvContent += 'Drinks Good,No Scavenging,Sleep Good,';
            csvContent += 'Zone2,VO2Max,Strength,Stability,Grip,';
            csvContent += 'Exercise Log,Breakfast Log,Lunch Log,Snack Log,Dinner Log,Drinks Log\n';

            Object.keys(allData).sort().forEach(date => {
                const data = allData[date];
                csvContent += `${date},${data.scores.intake},${data.scores.quality},${data.scores.habits},${data.scores.exercise},${data.scores.total},${data.weight || ''},`;
                csvContent += `${data.foodIntake.breakfast},${data.foodIntake.lunch},${data.foodIntake.snack},${data.foodIntake.dinner},`;
                csvContent += `${data.foodQuality.breakfast},${data.foodQuality.lunch},${data.foodQuality.snack},${data.foodQuality.dinner},`;
                csvContent += `${data.habits.drinks},${data.habits.scavenging},${data.habits.sleep},`;
                csvContent += `${data.exercise.zone2},${data.exercise.vo2max},${data.exercise.strength},${data.exercise.stability},${data.exercise.grip},`;
                csvContent += `"${data.logs.exercise || ''}","${data.logs.meals.breakfast || ''}","${data.logs.meals.lunch || ''}","${data.logs.meals.snack || ''}","${data.logs.meals.dinner || ''}","${data.logs.meals.drinks || ''}"\n`;
            });

            // Download CSV
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'health_tracker_data.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Data exported successfully!');
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function requestNotificationPermission() {
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        }

        function setDailyReminder() {
            // Check if user has entered data today
            const today = new Date().toISOString().split('T')[0];
            const allData = JSON.parse(localStorage.getItem('healthTrackerData') || '{}');
            
            if (!allData[today]) {
                // Show browser notification if permissions granted
                if ('Notification' in window && Notification.permission === 'granted') {
                    setTimeout(() => {
                        new Notification('Health Tracker Reminder', {
                            body: 'Don\'t forget to log your daily health data!',
                            icon: '/favicon.ico'
                        });
                    }, 60000); // Show after 1 minute if no data entered
                }
            }

            // Set up daily reminder for next day
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(9, 0, 0, 0); // 9 AM reminder

            const timeUntilReminder = tomorrow.getTime() - Date.now();
            
            setTimeout(() => {
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification('Daily Health Check', {
                        body: 'Time to log your health data for today!',
                        icon: '/favicon.ico'
                    });
                }
                setDailyReminder(); // Set up next reminder
            }, timeUntilReminder);
        }
    </script>
</body>
</html>